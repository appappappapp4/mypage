function imgControl(a){var c,d,e,f,g,h,b="<style>.iconhover{color:#6A6A6A !important;margin:0 6px;}.iconhover:hover{color:#0095ff !important;}<style>";$("head").append($(b)),c=$(a).find("img").filter(function(){return $(this).attr("src").indexOf("pubuserqiniu.paperol.cn")>-1}),c.css("margin",0).wrap("<div class='iimgWrap tac'></div>"),d=$("<a class='comIcon iconhover' style='font-size:20px;' href='javascript:;' title='放大'>&#xe613;</a>"),e=$("<a class='comIcon iconhover' style='font-size:20px;' href='javascript:;' title='缩小'>&#xe612;</a>"),f=$("<a class='comIcon iconhover' style='font-size:22px;' href='javascript:;' title='逆时针旋转90度'>&#xe6ae;</a>"),g=$("<a class='comIcon iconhover' style='font-size:22px;' href='javascript:;' title='顺时针旋转90度'>&#xe6af;</a>"),h=$("<div style='margin:2px 0 14px;text-align:center;line-height: normal;'></div>"),c.attr("rotate",0),location.href.indexOf("ViewCeShiJoinActivity.aspx")>-1&&c.parent().next("div").children("div").css("margin","4px 0px 10px 12px"),(location.href.indexOf("QuestionMarking.aspx")>-1||location.href.indexOf("questionmarking.aspx")>-1)&&(c.parent().parent().css("border-bottom","none"),c.parent().next("div").css({"line-height":"normal"}).children("div").css({margin:"12px 0px 10px 12px"}),c.parents("dd").css({"float":"none",width:"100%"}).siblings("dt").css({"float":"none"}).siblings(".stu-score").css({position:"relative",top:"-54px","margin-bottom":"-54px"})),location.href.indexOf("questionmarkingmobile.aspx")>-1&&(c.parent().parent().css({"border-bottom":"none"}),c.parent().next("div").css({"line-height":"normal"}).children("div").css({margin:"12px 0px 10px 12px"}),c.parents(".stu-answer-cont").css({"float":"none","margin-bottom":"10px"}).parent(".right").css({"float":"none",width:"100%"}).parent("li").css({display:"block",overflow:"hidden","padding-bottom":"20px","border-bottom":"1px solid #e3e4e5","margin-bottom":"20px"})),d.click(function(){var a=$(this).parent().prev(".iimgWrap"),b=a.find("img"),c=b.width()+200;c=c>600?600:c,b.width(c)}),e.click(function(){var a=$(this).parent().prev(".iimgWrap"),b=a.find("img"),c=b.width()-200;c=200>c?200:c,b.width(c)}),f.click(function(){var i,a=$(this).parent().prev(".iimgWrap"),b=a.find("img"),c=a.width(),d=a.height(),e=b.height(),f=b.width(),g=b.attr("rotate"),h=parseInt(g)-90;1==Math.abs(h)/90%2&&e>c?b.css({height:c,width:"auto"}):b.css({height:"auto"}),1==Math.abs(h)/90%2&&f>d?(a.height(f),i=Math.abs((e-f)/2),b.css({position:"relative",top:i})):(a.height("auto"),b.css({top:0})),b.attr("rotate",h).rotate(h)}),g.click(function(){var i,a=$(this).parent().prev(".iimgWrap"),b=a.find("img"),c=a.width(),d=a.height(),e=b.height(),f=b.width(),g=b.attr("rotate"),h=parseInt(g)+90;1==Math.abs(h)/90%2&&e>c?b.css({height:c,width:"auto"}):b.css({height:"auto"}),1==Math.abs(h)/90%2&&f>d?(a.height(f),i=Math.abs((e-f)/2),b.css({position:"relative",top:i})):(a.height("auto"),b.css({top:0})),b.attr("rotate",h).rotate(h)}),h.append(d).append(e).append(f).append(g),c.removeClass("pull-left").parent(".iimgWrap").after(h)}!function($){var supportedCSS,supportedCSSOrigin,a,styles=document.getElementsByTagName("head")[0].style,toCheck="transformProperty WebkitTransform OTransform msTransform MozTransform".split(" ");for(a=0;a<toCheck.length;a++)void 0!==styles[toCheck[a]]&&(supportedCSS=toCheck[a]);supportedCSS&&(supportedCSSOrigin=supportedCSS.replace(/[tT]ransform/,"TransformOrigin"),"T"==supportedCSSOrigin[0]&&(supportedCSSOrigin[0]="t")),eval('IE = "v"==""'),jQuery.fn.extend({rotate:function(a){var b,c,d,e,f,g;if(0!==this.length&&"undefined"!=typeof a){for("number"==typeof a&&(a={angle:a}),b=[],c=0,d=this.length;d>c;c++)e=this.get(c),e.Wilq32&&e.Wilq32.PhotoEffect?e.Wilq32.PhotoEffect._handleRotation(a):(f=$.extend(!0,{},a),g=new Wilq32.PhotoEffect(e,f)._rootObj,b.push($(g)));return b}},getRotateAngle:function(){var b,c,d,a=[0];for(b=0,c=this.length;c>b;b++)d=this.get(b),d.Wilq32&&d.Wilq32.PhotoEffect&&(a[b]=d.Wilq32.PhotoEffect._angle);return a},stopRotate:function(){var a,b,c;for(a=0,b=this.length;b>a;a++)c=this.get(a),c.Wilq32&&c.Wilq32.PhotoEffect&&clearTimeout(c.Wilq32.PhotoEffect._timer)}}),Wilq32=window.Wilq32||{},Wilq32.PhotoEffect=function(){return supportedCSS?function(a,b){a.Wilq32={PhotoEffect:this},this._img=this._rootObj=this._eventObj=a,this._handleRotation(b)}:function(a,b){if(this._img=a,this._onLoadDelegate=[b],this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Wilq32={PhotoEffect:this},a.parentNode.insertBefore(this._rootObj,a),a.complete)this._Loader();else{var c=this;jQuery(this._img).bind("load",function(){c._Loader()})}}}(),Wilq32.PhotoEffect.prototype={_setupParameters:function(a){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof a.angle&&(this._angle=a.angle),this._parameters.animateTo="number"==typeof a.animateTo?a.animateTo:this._angle,this._parameters.step=a.step||this._parameters.step||null,this._parameters.easing=a.easing||this._parameters.easing||this._defaultEasing,this._parameters.duration="duration"in a?a.duration:a.duration||this._parameters.duration||1e3,this._parameters.callback=a.callback||this._parameters.callback||this._emptyFunction,this._parameters.center=a.center||this._parameters.center||["50%","50%"],this._rotationCenterX="string"==typeof this._parameters.center[0]?parseInt(this._parameters.center[0],10)/100*this._imgWidth*this._aspectW:this._parameters.center[0],this._rotationCenterY="string"==typeof this._parameters.center[1]?parseInt(this._parameters.center[1],10)/100*this._imgHeight*this._aspectH:this._parameters.center[1],a.bind&&a.bind!=this._parameters.bind&&this._BindEvents(a.bind)},_emptyFunction:function(){},_defaultEasing:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},_handleRotation:function(a,b){return supportedCSS||this._img.complete||b?(this._setupParameters(a),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart(),void 0):(this._onLoadDelegate.push(a),void 0)},_BindEvents:function(a){var b,c;if(a&&this._eventObj){if(this._parameters.bind){b=this._parameters.bind;for(c in b)b.hasOwnProperty(c)&&jQuery(this._eventObj).unbind(c,b[c])}this._parameters.bind=a;for(c in a)a.hasOwnProperty(c)&&jQuery(this._eventObj).bind(c,a[c])}},_Loader:function(){return IE?function(){var c,a=this._img.width,b=this._img.height;for(this._imgWidth=a,this._imgHeight=b,this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height=b+"px",this._vimage.style.width=a+"px",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._aspectW=this._aspectH=1,this._container=this.createVMLNode("group"),this._container.style.width=a,this._container.style.height=b,this._container.style.position="absolute",this._container.style.top="0px",this._container.style.left="0px",this._container.setAttribute("coordsize",a-1+","+(b-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=a+"px",this._rootObj.style.height=b+"px",this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj;c=this._onLoadDelegate.shift();)this._handleRotation(c,!0)}:function(){var a,b;for(this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._imgWidth=this._img.naturalWidth,this._imgHeight=this._img.naturalHeight,a=Math.sqrt(this._imgHeight*this._imgHeight+this._imgWidth*this._imgWidth),this._width=3*a,this._height=3*a,this._aspectW=this._img.offsetWidth/this._img.naturalWidth,this._aspectH=this._img.offsetHeight/this._img.naturalHeight,this._img.parentNode.removeChild(this._img),this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",this._width),this._canvas.style.position="relative",this._canvas.style.left=-this._img.height*this._aspectW+"px",this._canvas.style.top=-this._img.width*this._aspectH+"px",this._canvas.Wilq32=this._rootObj.Wilq32,this._rootObj.appendChild(this._canvas),this._rootObj.style.width=this._img.width*this._aspectW+"px",this._rootObj.style.height=this._img.height*this._aspectH+"px",this._eventObj=this._canvas,this._cnv=this._canvas.getContext("2d");b=this._onLoadDelegate.shift();)this._handleRotation(b,!0)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var c,d,a=+new Date,b=a-this._animateStartTime>this._parameters.duration;b&&!this._parameters.animatedGif?clearTimeout(this._timer):((this._canvas||this._vimage||this._img)&&(c=this._parameters.easing(0,a-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration),this._rotate(~~(10*c)/10)),this._parameters.step&&this._parameters.step(this._angle),d=this,this._timer=setTimeout(function(){d._animate.call(d)},10)),this._parameters.callback&&b&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var a=Math.PI/180;return IE?function(a){this._angle=a,this._container.style.rotation=a%360+"deg",this._vimage.style.top=-(this._rotationCenterY-this._imgHeight/2)+"px",this._vimage.style.left=-(this._rotationCenterX-this._imgWidth/2)+"px",this._container.style.top=this._rotationCenterY-this._imgHeight/2+"px",this._container.style.left=this._rotationCenterX-this._imgWidth/2+"px"}:supportedCSS?function(a){this._angle=a,this._img.style[supportedCSS]="rotate("+a%360+"deg)",this._img.style[supportedCSSOrigin]=this._parameters.center.join(" ")}:function(b){this._angle=b,b=b%360*a,this._canvas.width=this._width,this._canvas.height=this._height,this._cnv.translate(this._imgWidth*this._aspectW,this._imgHeight*this._aspectH),this._cnv.translate(this._rotationCenterX,this._rotationCenterY),this._cnv.rotate(b),this._cnv.translate(-this._rotationCenterX,-this._rotationCenterY),this._cnv.scale(this._aspectW,this._aspectH),this._cnv.drawImage(this._img,0,0)}}()},IE&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<rvml:"+a+' class="rvml">')}}catch(a){return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())}(jQuery);